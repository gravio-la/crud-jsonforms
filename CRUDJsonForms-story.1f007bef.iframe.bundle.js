"use strict";(self.webpackChunk_graviola_crud_jsonforms=self.webpackChunk_graviola_crud_jsonforms||[]).push([[165],{"./src/components/CRUDJsonForms.story.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>CRUDJsonForms_story});var Box=__webpack_require__("./node_modules/@mui/material/Box/Box.js"),esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),jsonforms_core_esm=__webpack_require__("./node_modules/@jsonforms/core/lib/jsonforms-core.esm.js"),jsonforms_react_material_esm=__webpack_require__("./node_modules/@jsonforms/material-renderers/lib/jsonforms-react-material.esm.js"),jsonforms_react_esm=__webpack_require__("./node_modules/@jsonforms/react/lib/jsonforms-react.esm.js"),EditOff=__webpack_require__("./node_modules/@mui/icons-material/esm/EditOff.js"),Edit=__webpack_require__("./node_modules/@mui/icons-material/esm/Edit.js"),Hidden=__webpack_require__("./node_modules/@mui/material/Hidden/Hidden.js"),IconButton=__webpack_require__("./node_modules/@mui/material/IconButton/IconButton.js"),Button=__webpack_require__("./node_modules/@mui/material/Button/Button.js"),Grid=__webpack_require__("./node_modules/@mui/material/Grid/Grid.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),react=__webpack_require__("./node_modules/react/index.js"),FormControl=__webpack_require__("./node_modules/@mui/material/FormControl/FormControl.js"),FormLabel=__webpack_require__("./node_modules/@mui/material/FormLabel/FormLabel.js"),merge=__webpack_require__("./node_modules/lodash/merge.js"),merge_default=__webpack_require__.n(merge),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js");const renderer_AutoIdentifierRenderer=(0,jsonforms_react_esm.ZJ)((props=>{const{id,errors,schema,uischema,required,config,data,handleChange,path}=props,isValid=0===errors.length,appliedUiSchemaOptions=merge_default()({},config,uischema.options),[editMode,setEditMode]=(0,react.useState)(!1),handleChange_=(0,react.useCallback)((v=>{handleChange(path,v)}),[path,handleChange]);return(0,react.useEffect)((()=>{if(!data&&schema.title){const newURI=`${schema.title}${(0,v4.Z)()}`;handleChange_(newURI)}}),[schema,data,handleChange_]),react.createElement(Hidden.Z,{xsUp:!0},react.createElement(FormControl.Z,{fullWidth:!appliedUiSchemaOptions.trim,id,variant:"standard",sx:theme=>({marginBottom:theme.spacing(2)})},react.createElement(Grid.ZP,{container:!0,alignItems:"baseline"},react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:()=>setEditMode((prev=>!prev))},editMode?react.createElement(EditOff.Z,null):react.createElement(Edit.Z,null))),editMode&&react.createElement(Grid.ZP,{item:!0},react.createElement(FormLabel.Z,{error:!isValid,required:(0,jsonforms_core_esm.Dg7)(!!required,appliedUiSchemaOptions.hideRequiredAsterisk)},data||"")))))}));var Typography=__webpack_require__("./node_modules/@mui/material/Typography/Typography.js");const defs=schema=>schema.$defs||schema.definitions||{},recursivelyFindRefsAndAppendStub=(schema,rootSchema=schema)=>{const definitionsKey="$defs"in rootSchema?"$defs":"definitions";return schema.$ref?{...schema,$ref:`${schema.$ref}Stub`}:(0,lodash.isObject)(schema.items)?{...schema,items:recursivelyFindRefsAndAppendStub(schema.items,rootSchema)}:schema.properties?{...schema,properties:Object.fromEntries(Object.entries(schema.properties).map((([k,s])=>[k,recursivelyFindRefsAndAppendStub(s,rootSchema)])))}:defs(schema)?{...schema,[definitionsKey]:Object.fromEntries(Object.entries(defs(schema)).map((([k,s])=>[k,recursivelyFindRefsAndAppendStub(s,rootSchema)])))}:schema},labels={Person:"Person",Work:"Werk",Organization:"Organisation",Location:"Ort",Resource:"Ressource",ExhibitionType:"Ausstellungsart",GeographicLocation:"Geografischer Ort"},createStubLayout=(defs,baseIRI,label,definitionsKey="$defs")=>({type:"VerticalLayout",elements:[{type:"Control",label:labels[defs]||label||defs,options:{inline:!0,context:{$ref:`#/${definitionsKey}/${defs}`,typeIRI:`${baseIRI}${defs}`,useModal:!1}},scope:"#/properties/@id"},{type:"Control",scope:"#/properties/@type"}]}),uischemas=(schema,baseIRI)=>(schema=>Object.keys(defs(schema)))(schema).map((key=>((key,baseIRI,label,definitionsKey)=>({tester:schema=>schema.properties?.["@type"]?.const===`${baseIRI}${key}`?21:-1,uischema:createStubLayout(key,baseIRI,label,definitionsKey)}))(key,baseIRI,void 0,"definitions")));var useQuery=__webpack_require__("./node_modules/@tanstack/react-query/build/lib/useQuery.mjs");const useInlineForm=(config,rootSchema,schema,uischema)=>{const{baseIRI}=config,uischemata=(0,react.useMemo)((()=>rootSchema?uischemas(rootSchema,baseIRI):[]),[rootSchema,baseIRI]),{$ref,typeIRI}=uischema.options?.context||{},uischemaExternal=((typeIRI,baseIRI)=>{const typeName=(0,react.useMemo)((()=>typeIRI.substring(baseIRI.length,typeIRI.length)),[typeIRI,baseIRI]),{data}=(0,useQuery.a)(["uischema",typeIRI],(()=>fetch(`./uischema/${typeName}.uischema.json`).then((async res=>{let schema=null;try{schema=await res.json()}catch(e){console.log(`No uischema found for ${typeName}`)}return schema}))),{retry:!1,refetchOnWindowFocus:!1,onError:_err=>{}});return data})(typeIRI||"",baseIRI),subSchema=(0,react.useMemo)((()=>$ref&&((schema,rootSchema,path)=>{const schema2={...schema,$ref:path},{properties:_,...schemaWithoutProperties}=rootSchema;return{...schemaWithoutProperties,...(0,jsonforms_core_esm.q_E)(schema2,"",rootSchema)}})(schema,rootSchema,$ref)),[$ref,schema,rootSchema]),{renderDiscoverAutocomplete:DiscoverAutocomplete}=config;return{uischemaExternal,uischemata,subSchema,typeIRI,DiscoverAutocomplete}},renderer_InlineCondensedSemanticFormsRenderer=(0,jsonforms_react_esm.ZJ)((props=>{const{id,schema,uischema,visible,config,data,handleChange,path,rootSchema,label,description}=props,appliedUiSchemaOptions=merge_default()({},config,uischema.options),[editMode,setEditMode]=(0,react.useState)(!1),[formData,setFormData]=(0,react.useState)({"@id":data}),ctx=(0,jsonforms_react_esm.YQ)(),[realLabel,setRealLabel]=(0,react.useState)(""),{typeIRI,subSchema,uischemata,uischemaExternal,DiscoverAutocomplete}=useInlineForm(config,rootSchema,schema,uischema),handleChange_=(0,react.useCallback)((v=>{v!==data&&handleChange(path,v)}),[path,handleChange,data]);(0,react.useEffect)((()=>{let label_="";if(data){const parentData=jsonforms_core_esm.WDu.data(ctx?.core?.data,path.substring(0,path.length-4));label_=parentData?.label||parentData?.name||parentData?.title||parentData?.["@id"]?.value||""}setRealLabel(label_)}),[data,ctx?.core?.data,path,setRealLabel]);const newURI=(0,react.useCallback)((()=>{if(!data){const newURI=`${schema.title}${(0,v4.Z)()}`;handleChange_(newURI)}}),[schema,data,handleChange_]);return(0,react.useEffect)((()=>{editMode&&newURI()}),[newURI,editMode]),react.createElement(Hidden.Z,{xsUp:!visible},react.createElement(Grid.ZP,{container:!0,alignItems:"baseline"},react.createElement(Grid.ZP,{item:!0,flex:"auto"},DiscoverAutocomplete?realLabel?react.createElement(DiscoverAutocomplete,{key:"not empty",readonly:Boolean(ctx.readonly),typeIRI,title:description||label||"",defaultSelected:{value:data,label:realLabel},onSelectionChange:selection=>handleChange_(selection?.value)}):react.createElement(DiscoverAutocomplete,{key:"empty",readonly:Boolean(ctx.readonly),typeIRI,title:description||label||"",onSelectionChange:selection=>handleChange_(selection?.value)}):react.createElement(react.Fragment,null,react.createElement(Typography.Z,{variant:"body1"},label,": ",realLabel||react.createElement(Box.Z,{component:"span",sx:theme=>({color:theme.palette.grey[500]})},"no data")))),react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:()=>setEditMode((editMode=>!editMode))},editMode?react.createElement(react.Fragment,null,react.createElement(EditOff.Z,null)):react.createElement(Edit.Z,null)))),react.createElement(FormControl.Z,{fullWidth:!appliedUiSchemaOptions.trim,id,variant:"standard",sx:theme=>({marginBottom:theme.spacing(2)})},subSchema&&editMode&&react.createElement(Grid.ZP,{container:!0,alignItems:"baseline"},react.createElement(Grid.ZP,{item:!0,flex:"auto"},react.createElement(CRUDJsonForms,{readonly:!1,data:formData,entityIRI:data,setData:_data=>setFormData(_data),shouldLoadInitially:!0,typeIRI,schema:subSchema,jsonFormsProps:{uischema:uischemaExternal||void 0,uischemas:uischemata,config},onEntityChange:handleChange_})))))})),renderer_InlineSemanticFormsRenderer=(0,jsonforms_react_esm.ZJ)((props=>{const{id,schema,uischema,visible,config,data,handleChange,path,rootSchema}=props,appliedUiSchemaOptions=merge_default()({},config,uischema.options),[editMode,_setEditMode]=(0,react.useState)(!1),[formData,setFormData]=(0,react.useState)({"@id":data}),{typeIRI,subSchema,uischemata,uischemaExternal}=useInlineForm(config,rootSchema,schema,uischema),handleChange_=(0,react.useCallback)((v=>{v!==data&&handleChange(path,v)}),[path,handleChange,data]),init=(0,react.useCallback)((()=>{if(!data&&!editMode){const newURI=`${schema.title}${(0,v4.Z)()}`;handleChange_(newURI)}}),[schema,data,handleChange_]);return(0,react.useEffect)((()=>{init()}),[init]),react.createElement(Hidden.Z,{xsUp:!visible},react.createElement(FormControl.Z,{fullWidth:!appliedUiSchemaOptions.trim,id,variant:"standard",sx:theme=>({marginBottom:theme.spacing(2)})},subSchema&&react.createElement(Grid.ZP,{container:!0,alignItems:"baseline"},react.createElement(Grid.ZP,{item:!0,flex:"auto"},react.createElement(CRUDJsonForms,{readonly:!editMode,data:formData,entityIRI:data,setData:_data=>setFormData(_data),shouldLoadInitially:!0,typeIRI,schema:subSchema,jsonFormsProps:{uischema:uischemaExternal||void 0,uischemas:uischemata,config},onEntityChange:handleChange_})))))}));var map=__webpack_require__("./node_modules/lodash/map.js"),map_default=__webpack_require__.n(map),range=__webpack_require__("./node_modules/lodash/range.js"),range_default=__webpack_require__.n(range),Add=__webpack_require__("./node_modules/@mui/icons-material/Add.js"),Toolbar=__webpack_require__("./node_modules/@mui/material/Toolbar/Toolbar.js"),Tooltip=__webpack_require__("./node_modules/@mui/material/Tooltip/Tooltip.js"),ErrorOutline=__webpack_require__("./node_modules/@mui/icons-material/ErrorOutline.js"),styled=__webpack_require__("./node_modules/@mui/material/styles/styled.js"),Badge=__webpack_require__("./node_modules/@mui/material/Badge/Badge.js");const StyledBadge=(0,styled.ZP)(Badge.Z)((({theme})=>({color:theme.palette.error.main}))),ValidationIcon=({errorMessages,id})=>react.createElement(Tooltip.Z,{id,title:errorMessages},react.createElement(StyledBadge,{badgeContent:errorMessages.split("\n").length},react.createElement(ErrorOutline.Z,{color:"inherit"}))),MaterialArrayLayout_ValidationIcon=ValidationIcon;try{ValidationIcon.displayName="ValidationIcon",ValidationIcon.__docgenInfo={description:"",displayName:"ValidationIcon",props:{errorMessages:{defaultValue:null,description:"",name:"errorMessages",required:!0,type:{name:"string"}},id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ValidationIcon.tsx#ValidationIcon"]={docgenInfo:ValidationIcon.__docgenInfo,name:"ValidationIcon",path:"src/components/renderer/MaterialArrayLayout/ValidationIcon.tsx#ValidationIcon"})}catch(__react_docgen_typescript_loader_error){}const ArrayLayoutToolbar=react.memo((({label,errors,addItem,path,createDefault,readonly})=>{const t=(key,_options)=>key;return react.createElement(Toolbar.Z,{disableGutters:!0},react.createElement(Grid.ZP,{container:!0,alignItems:"center",justifyContent:"space-between"},react.createElement(Grid.ZP,{item:!0},react.createElement(Typography.Z,{variant:"h6"},label)),react.createElement(Hidden.Z,{xsUp:0===errors.length},react.createElement(Grid.ZP,{item:!0},react.createElement(MaterialArrayLayout_ValidationIcon,{id:"tooltip-validation",errorMessages:errors}))),react.createElement(Grid.ZP,{item:!0},react.createElement(Grid.ZP,{container:!0,sx:{visibility:readonly?"hidden":"visible"}},react.createElement(Grid.ZP,{item:!0},react.createElement(Tooltip.Z,{id:"tooltip-add",title:t("add_another")||"",placement:"bottom"},react.createElement(IconButton.Z,{"aria-label":t("add_another"),onClick:addItem(path,createDefault()),size:"large"},react.createElement(Add.Z,null))))))))}));try{ArrayLayoutToolbar.displayName="ArrayLayoutToolbar",ArrayLayoutToolbar.__docgenInfo={description:"",displayName:"ArrayLayoutToolbar",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},errors:{defaultValue:null,description:"",name:"errors",required:!0,type:{name:"string"}},path:{defaultValue:null,description:"",name:"path",required:!0,type:{name:"string"}},addItem:{defaultValue:null,description:"",name:"addItem",required:!0,type:{name:"(path: string, data: any) => () => void"}},createDefault:{defaultValue:null,description:"",name:"createDefault",required:!0,type:{name:"() => any"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ArrayToolbar.tsx#ArrayLayoutToolbar"]={docgenInfo:ArrayLayoutToolbar.__docgenInfo,name:"ArrayLayoutToolbar",path:"src/components/renderer/MaterialArrayLayout/ArrayToolbar.tsx#ArrayLayoutToolbar"})}catch(__react_docgen_typescript_loader_error){}var ArrowDownward=__webpack_require__("./node_modules/@mui/icons-material/ArrowDownward.js"),ArrowUpward=__webpack_require__("./node_modules/@mui/icons-material/ArrowUpward.js"),Delete=__webpack_require__("./node_modules/@mui/icons-material/Delete.js"),ExpandMore=__webpack_require__("./node_modules/@mui/icons-material/ExpandMore.js"),Accordion=__webpack_require__("./node_modules/@mui/material/Accordion/Accordion.js"),AccordionSummary=__webpack_require__("./node_modules/@mui/material/AccordionSummary/AccordionSummary.js"),Avatar=__webpack_require__("./node_modules/@mui/material/Avatar/Avatar.js"),AccordionDetails=__webpack_require__("./node_modules/@mui/material/AccordionDetails/AccordionDetails.js"),get=__webpack_require__("./node_modules/lodash/get.js"),get_default=__webpack_require__.n(get),Save=__webpack_require__("./node_modules/@mui/icons-material/esm/Save.js"),DeleteForever=__webpack_require__("./node_modules/@mui/icons-material/esm/DeleteForever.js"),Refresh=__webpack_require__("./node_modules/@mui/icons-material/esm/Refresh.js"),Fullscreen=__webpack_require__("./node_modules/@mui/icons-material/esm/Fullscreen.js"),Close=__webpack_require__("./node_modules/@mui/icons-material/esm/Close.js"),colorManipulator=__webpack_require__("./node_modules/@mui/system/esm/colorManipulator.js"),AppBar=__webpack_require__("./node_modules/@mui/material/AppBar/AppBar.js"),Dialog=__webpack_require__("./node_modules/@mui/material/Dialog/Dialog.js"),DialogActions=__webpack_require__("./node_modules/@mui/material/DialogActions/DialogActions.js"),DialogContent=__webpack_require__("./node_modules/@mui/material/DialogContent/DialogContent.js"),useTheme=__webpack_require__("./node_modules/@mui/material/styles/useTheme.js"),useMediaQuery=__webpack_require__("./node_modules/@mui/material/useMediaQuery/useMediaQuery.js");const Search=(0,styled.ZP)("div")((({theme})=>({position:"relative",borderRadius:theme.shape.borderRadius,backgroundColor:(0,colorManipulator.Fq)(theme.palette.common.white,.15),"&:hover":{backgroundColor:(0,colorManipulator.Fq)(theme.palette.common.white,.25)},marginRight:theme.spacing(2),marginLeft:0,width:"100%",[theme.breakpoints.up("sm")]:{marginLeft:theme.spacing(3),width:"auto"}}))),MuiEditDialog=({children,open,title,onSave,onCancel,onClose,onReload,onRemove,search})=>{const theme=(0,useTheme.Z)(),[forceFullscreen,setForceFullscreen]=(0,react.useState)(!1),fullScreen=(0,useMediaQuery.Z)(theme.breakpoints.down("md"));return react.createElement(Dialog.Z,{fullScreen:fullScreen||forceFullscreen,open:Boolean(open),onClose,fullWidth:!0,maxWidth:"lg",scroll:"paper",disableScrollLock:!1,"aria-labelledby":"responsive-dialog-title",onClick:e=>e.stopPropagation()},react.createElement(AppBar.Z,{position:"static"},react.createElement(Toolbar.Z,{variant:"dense"},react.createElement(Typography.Z,{variant:"h6",color:"inherit",component:"div"},title||"Bearbeiten oder Erstellen"),react.createElement(Box.Z,{sx:{flexGrow:3}},react.createElement(Search,null,search)),react.createElement(Box.Z,{sx:{flexGrow:1}}),react.createElement(Box.Z,{sx:{display:{xs:"none",md:"flex"}}},onSave&&react.createElement(IconButton.Z,{size:"large","aria-label":"save your edits!",onClick:onSave,color:"inherit"},react.createElement(Save.Z,null)),onRemove&&react.createElement(IconButton.Z,{size:"large","aria-label":"reload from server",onClick:onRemove,color:"inherit"},react.createElement(DeleteForever.Z,null)),onReload&&react.createElement(IconButton.Z,{size:"large","aria-label":"reload from server",onClick:onReload,color:"inherit"},react.createElement(Refresh.Z,null)),react.createElement(IconButton.Z,{size:"large","aria-label":"close without saving",onClick:()=>setForceFullscreen((ff=>!ff)),color:"inherit"},react.createElement(Fullscreen.Z,null)),react.createElement(IconButton.Z,{size:"large","aria-label":"close without saving",onClick:onClose,color:"inherit"},react.createElement(Badge.Z,{badgeContent:1,color:"error"},react.createElement(Close.Z,null)))))),react.createElement(DialogContent.Z,null,children),react.createElement(DialogActions.Z,null,onCancel&&react.createElement(Button.Z,{autoFocus:!0,onClick:onCancel},"abbrechen"),onSave&&react.createElement(Button.Z,{onClick:onSave,autoFocus:!0},"speichern")))},dialog_MuiEditDialog=MuiEditDialog;try{MuiEditDialog.displayName="MuiEditDialog",MuiEditDialog.__docgenInfo={description:"",displayName:"MuiEditDialog",props:{onCancel:{defaultValue:null,description:"",name:"onCancel",required:!1,type:{name:"(() => void)"}},onSave:{defaultValue:null,description:"",name:"onSave",required:!1,type:{name:"(() => void)"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"(() => void)"}},onReload:{defaultValue:null,description:"",name:"onReload",required:!1,type:{name:"(() => void)"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"(() => void)"}},open:{defaultValue:null,description:"",name:"open",required:!1,type:{name:"boolean"}},title:{defaultValue:null,description:"",name:"title",required:!1,type:{name:"string"}},search:{defaultValue:null,description:"",name:"search",required:!1,type:{name:"ReactChild"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/dialog/MuiEditDialog.tsx#MuiEditDialog"]={docgenInfo:MuiEditDialog.__docgenInfo,name:"MuiEditDialog",path:"src/components/dialog/MuiEditDialog.tsx#MuiEditDialog"})}catch(__react_docgen_typescript_loader_error){}const renderer_InlineSemanticFormsRendererModal=(0,jsonforms_react_esm.ZJ)((props=>{const{id,schema,uischema,visible,config,data,handleChange,path,rootSchema,label}=props,appliedUiSchemaOptions=merge_default()({},config,uischema.options),[modalIsOpen,setModalIsOpen]=(0,react.useState)(!1),[formData,setFormData]=(0,react.useState)({"@id":data}),[CRUDOps,setCRUDOps]=(0,react.useState)(),{load,save,remove}=CRUDOps||{},{typeIRI,subSchema,uischemata,uischemaExternal,DiscoverAutocomplete}=useInlineForm(config,rootSchema,schema,uischema),handleChange_=(0,react.useCallback)((v=>{v!==data&&handleChange(path,v)}),[path,handleChange,data]),handleToggle=(0,react.useCallback)((()=>{const prefix=schema.title;if(!data&&!modalIsOpen){const newURI=`${prefix}${(0,v4.Z)()}`;handleChange_(newURI)}setModalIsOpen(!modalIsOpen)}),[schema,data,handleChange_,setModalIsOpen,modalIsOpen]),handleSave=(0,react.useCallback)((async()=>{save&&(await save(),setModalIsOpen(!1))}),[save,setModalIsOpen]),handleRemove=(0,react.useCallback)((async()=>{remove&&(await remove(),setModalIsOpen(!1))}),[remove,setModalIsOpen]);return react.createElement(Hidden.Z,{xsUp:!visible},react.createElement(FormControl.Z,{fullWidth:!appliedUiSchemaOptions.trim,id,variant:"standard",sx:theme=>({marginBottom:theme.spacing(2)})},react.createElement(IconButton.Z,{onClick:e=>{e.stopPropagation(),handleToggle()}},modalIsOpen?react.createElement(EditOff.Z,null):react.createElement(Edit.Z,null)),modalIsOpen&&subSchema&&react.createElement(dialog_MuiEditDialog,{title:label||"",open:modalIsOpen,onClose:handleToggle,onCancel:handleToggle,onSave:handleSave,onReload:load,search:DiscoverAutocomplete&&react.createElement(DiscoverAutocomplete,{typeIRI,title:label||"",onSelectionChange:selection=>handleChange_(selection?.value)}),onRemove:handleRemove},react.createElement(CRUDJsonForms,{data:formData,hideToolbar:!0,entityIRI:data,setData:_data=>setFormData(_data),shouldLoadInitially:!0,typeIRI,schema:subSchema,jsonFormsProps:{uischema:uischemaExternal||void 0,uischemas:uischemata,config},onEntityChange:handleChange_,onInit:crudOps=>setCRUDOps(crudOps)}))))}));var find=__webpack_require__("./node_modules/lodash/find.js"),find_default=__webpack_require__.n(find);const iconStyle={float:"right"},ExpandPanelRendererComponent=props=>{const[labelHtmlId]=(0,react.useState)((0,jsonforms_core_esm.McK)("expand-panel"));(0,react.useEffect)((()=>()=>{(0,jsonforms_core_esm.hi3)(labelHtmlId)}),[labelHtmlId]);const{childLabel,childPath,index,expanded,moveDown,moveUp,enableMoveDown,enableMoveUp,handleExpansion,removeItems,path,rootSchema,schema,uischema,uischemas,renderers,cells,config,readonly,avatar}=props,foundUISchema=(0,react.useMemo)((()=>(0,jsonforms_core_esm.W52)(uischemas||[],schema,uischema.scope,path,void 0,uischema,rootSchema)),[uischemas,schema,uischema.scope,path,uischema,rootSchema]),appliedUiSchemaOptions=merge_default()({},config,uischema.options);return react.createElement(Accordion.Z,{"aria-labelledby":labelHtmlId,expanded,onChange:handleExpansion(childPath)},react.createElement(AccordionSummary.Z,{expandIcon:react.createElement(ExpandMore.Z,null)},react.createElement(Grid.ZP,{container:!0,alignItems:"center"},react.createElement(Grid.ZP,{item:!0,xs:7,md:9},react.createElement(Grid.ZP,{container:!0,alignItems:"center"},react.createElement(Grid.ZP,{item:!0,xs:2,md:1},react.createElement(Avatar.Z,{"aria-label":"Index",src:avatar},index+1)),react.createElement(Grid.ZP,{item:!0,xs:10,md:11},react.createElement("span",{id:labelHtmlId},childLabel)))),react.createElement(Grid.ZP,{item:!0,xs:5,md:3},react.createElement(Grid.ZP,{container:!0,justifyContent:"flex-end"},react.createElement(Grid.ZP,{item:!0},react.createElement(Grid.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"center",sx:{visibility:readonly?"hidden":"visible"}},appliedUiSchemaOptions.showSortButtons?react.createElement(react.Fragment,null,react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:moveUp(path,index),style:iconStyle,disabled:!enableMoveUp,"aria-label":"Move up",size:"large"},react.createElement(ArrowUpward.Z,null))),react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:moveDown(path,index),style:iconStyle,disabled:!enableMoveDown,"aria-label":"Move down",size:"large"},react.createElement(ArrowDownward.Z,null)))):"",react.createElement(Grid.ZP,{item:!0,style:{paddingTop:"1rem"}},react.createElement(jsonforms_react_esm.et,{schema,uischema:foundUISchema,path:childPath,key:childPath,renderers:[...renderers||[],{tester:(0,jsonforms_core_esm.yMz)(15,(uischema=>{if((0,lodash.isEmpty)(uischema))return!1;const options=uischema.options;return!(0,lodash.isEmpty)(options)&&options.inline})),renderer:renderer_InlineSemanticFormsRendererModal}],cells})),react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:removeItems(path,[index]),style:iconStyle,"aria-label":"Delete",size:"large"},react.createElement(Delete.Z,null))))))))),react.createElement(AccordionDetails.Z,null,expanded&&react.createElement(jsonforms_react_esm.et,{schema,uischema:foundUISchema,path:childPath,key:childPath,renderers:[...renderers||[],{tester:(0,jsonforms_core_esm.yMz)(15,(uischema=>{if((0,lodash.isEmpty)(uischema))return!1;const options=uischema.options;return!(0,lodash.isEmpty)(options)&&options.inline})),renderer:renderer_InlineSemanticFormsRenderer}],cells})))},useCtxDispatchToExpandPanelProps=dispatch=>({removeItems:(0,react.useCallback)(((path,toDelete)=>event=>{event.stopPropagation(),dispatch((0,jsonforms_core_esm.Vxg)(path,(array=>(toDelete.sort().reverse().forEach((s=>array.splice(s,1))),array))))}),[dispatch]),moveUp:(0,react.useCallback)(((path,toMove)=>event=>{event.stopPropagation(),dispatch((0,jsonforms_core_esm.Vxg)(path,(array=>((0,jsonforms_core_esm.A16)(array,toMove),array))))}),[dispatch]),moveDown:(0,react.useCallback)(((path,toMove)=>event=>{event.stopPropagation(),dispatch((0,jsonforms_core_esm.Vxg)(path,(array=>((0,jsonforms_core_esm.vig)(array,toMove),array))))}),[dispatch])}),getFirstPrimitivePropExceptJsonLD=schema=>{if(schema.properties)return find_default()(Object.keys(schema.properties),(propName=>{const prop=schema.properties[propName];return("string"===prop.type||"number"===prop.type||"integer"===prop.type)&&!propName.startsWith("@")}))},withContextToExpandPanelProps=Component=>({ctx,props})=>{const dispatchProps=useCtxDispatchToExpandPanelProps(ctx.dispatch),{childLabelProp,schema,path,index,uischemas}=props,childPath=(0,jsonforms_core_esm.ZBw)(path,`${index}`),childData=jsonforms_core_esm.WDu.data(ctx.core.data,childPath),childLabel=childLabelProp?get_default()(childData,childLabelProp,""):get_default()(childData,getFirstPrimitivePropExceptJsonLD(schema),""),avatar=get_default()(childData,"image")||get_default()(childData,"logo");return react.createElement(Component,(0,esm_extends.Z)({},props,dispatchProps,{childLabel,childPath,uischemas,avatar}))},withJsonFormsExpandPanelProps=Component=>(0,jsonforms_react_esm.XO)(withContextToExpandPanelProps(Component)),MaterialArrayLayout_ExpandPanelRenderer=withJsonFormsExpandPanelProps(react.memo(ExpandPanelRendererComponent));try{useCtxDispatchToExpandPanelProps.displayName="useCtxDispatchToExpandPanelProps",useCtxDispatchToExpandPanelProps.__docgenInfo={description:"Maps state to dispatch properties of an expand pandel control.",displayName:"useCtxDispatchToExpandPanelProps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#useCtxDispatchToExpandPanelProps"]={docgenInfo:useCtxDispatchToExpandPanelProps.__docgenInfo,name:"useCtxDispatchToExpandPanelProps",path:"src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#useCtxDispatchToExpandPanelProps"})}catch(__react_docgen_typescript_loader_error){}try{getFirstPrimitivePropExceptJsonLD.displayName="getFirstPrimitivePropExceptJsonLD",getFirstPrimitivePropExceptJsonLD.__docgenInfo={description:"",displayName:"getFirstPrimitivePropExceptJsonLD",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#getFirstPrimitivePropExceptJsonLD"]={docgenInfo:getFirstPrimitivePropExceptJsonLD.__docgenInfo,name:"getFirstPrimitivePropExceptJsonLD",path:"src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#getFirstPrimitivePropExceptJsonLD"})}catch(__react_docgen_typescript_loader_error){}try{withContextToExpandPanelProps.displayName="withContextToExpandPanelProps",withContextToExpandPanelProps.__docgenInfo={description:"Map state to control props.",displayName:"withContextToExpandPanelProps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#withContextToExpandPanelProps"]={docgenInfo:withContextToExpandPanelProps.__docgenInfo,name:"withContextToExpandPanelProps",path:"src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#withContextToExpandPanelProps"})}catch(__react_docgen_typescript_loader_error){}try{withJsonFormsExpandPanelProps.displayName="withJsonFormsExpandPanelProps",withJsonFormsExpandPanelProps.__docgenInfo={description:"",displayName:"withJsonFormsExpandPanelProps",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#withJsonFormsExpandPanelProps"]={docgenInfo:withJsonFormsExpandPanelProps.__docgenInfo,name:"withJsonFormsExpandPanelProps",path:"src/components/renderer/MaterialArrayLayout/ExpandPanelRenderer.tsx#withJsonFormsExpandPanelProps"})}catch(__react_docgen_typescript_loader_error){}const MaterialArrayLayoutComponent=props=>{const[expanded,setExpanded]=(0,react.useState)(!1),innerCreateDefaultValue=(0,react.useCallback)((()=>(0,jsonforms_core_esm.XuX)(props.schema)),[props.schema]),handleChange=(0,react.useCallback)((panel=>(_event,expandedPanel)=>{setExpanded(!!expandedPanel&&panel)}),[]),isExpanded=index=>expanded===(0,jsonforms_core_esm.ZBw)(props.path,`${index}`),{data,path,schema,uischema,errors,addItem,renderers,cells,label,required,rootSchema,config,uischemas}=props,appliedUiSchemaOptions=merge_default()({},config,props.uischema.options),{readonly}=(0,jsonforms_react_esm.YQ)();return react.createElement("div",null,react.createElement(ArrayLayoutToolbar,{label:(0,jsonforms_core_esm.lgi)(label,Boolean(required),appliedUiSchemaOptions.hideRequiredAsterisk),errors,path,addItem,createDefault:innerCreateDefaultValue,readonly}),react.createElement("div",null,data>0?map_default()(range_default()(data),(index=>react.createElement(MaterialArrayLayout_ExpandPanelRenderer,{index,expanded:isExpanded(index),schema,path,handleExpansion:handleChange,uischema,renderers,cells,key:index,rootSchema,enableMoveUp:0!=index,enableMoveDown:index<data-1,config,childLabelProp:appliedUiSchemaOptions.elementLabelProp,uischemas,readonly}))):react.createElement("p",null,"No data")))},renderer_MaterialArrayLayout=react.memo(MaterialArrayLayoutComponent),MaterialArrayOfLinkedItemRenderer=({visible,enabled,id,uischema,schema,label,rootSchema,renderers,cells,data,path,errors,uischemas,addItem})=>{const addItemCb=(0,react.useCallback)(((p,value)=>addItem(p,value)),[addItem]);return react.createElement(Hidden.Z,{xsUp:!visible},react.createElement(renderer_MaterialArrayLayout,{label,uischema,schema,id,rootSchema,errors,enabled,visible,data,path,addItem:addItemCb,renderers,cells,uischemas,translations:{}}))},renderer_MaterialArrayOfLinkedItemRenderer=((0,jsonforms_core_esm.yMz)(4,jsonforms_core_esm.qPj),(0,jsonforms_react_esm.AG)(MaterialArrayOfLinkedItemRenderer));try{MaterialArrayOfLinkedItemRenderer.displayName="MaterialArrayOfLinkedItemRenderer",MaterialArrayOfLinkedItemRenderer.__docgenInfo={description:"",displayName:"MaterialArrayOfLinkedItemRenderer",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialArrayOfLinkedItemRenderer.tsx#MaterialArrayOfLinkedItemRenderer"]={docgenInfo:MaterialArrayOfLinkedItemRenderer.__docgenInfo,name:"MaterialArrayOfLinkedItemRenderer",path:"src/components/renderer/MaterialArrayOfLinkedItemRenderer.tsx#MaterialArrayOfLinkedItemRenderer"})}catch(__react_docgen_typescript_loader_error){}var Tabs=__webpack_require__("./node_modules/@mui/material/Tabs/Tabs.js"),Tab=__webpack_require__("./node_modules/@mui/material/Tab/Tab.js"),omit=__webpack_require__("./node_modules/lodash/omit.js"),omit_default=__webpack_require__.n(omit);const isLayout=uischema=>uischema.hasOwnProperty("elements");class CombinatorProperties extends react.Component{render(){const{schema,combinatorKeyword,path}=this.props,otherProps=omit_default()(schema,combinatorKeyword),foundUISchema=jsonforms_core_esm.Iiz.uiSchema(otherProps,"VerticalLayout");let isLayoutWithElements=!1;return null!==foundUISchema&&isLayout(foundUISchema)&&(isLayoutWithElements=foundUISchema.elements.length>0),isLayoutWithElements?react.createElement(jsonforms_react_esm.et,{schema:otherProps,path,uischema:foundUISchema}):null}}const MaterialCustomAnyOfRenderer_CombinatorProperties=CombinatorProperties;try{isLayout.displayName="isLayout",isLayout.__docgenInfo={description:"",displayName:"isLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialCustomAnyOfRenderer/CombinatorProperties.tsx#isLayout"]={docgenInfo:isLayout.__docgenInfo,name:"isLayout",path:"src/components/renderer/MaterialCustomAnyOfRenderer/CombinatorProperties.tsx#isLayout"})}catch(__react_docgen_typescript_loader_error){}try{CombinatorProperties.displayName="CombinatorProperties",CombinatorProperties.__docgenInfo={description:"",displayName:"CombinatorProperties",props:{schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"JsonSchema"}},combinatorKeyword:{defaultValue:null,description:"",name:"combinatorKeyword",required:!0,type:{name:"enum",value:[{value:'"anyOf"'},{value:'"oneOf"'}]}},path:{defaultValue:null,description:"",name:"path",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialCustomAnyOfRenderer/CombinatorProperties.tsx#CombinatorProperties"]={docgenInfo:CombinatorProperties.__docgenInfo,name:"CombinatorProperties",path:"src/components/renderer/MaterialCustomAnyOfRenderer/CombinatorProperties.tsx#CombinatorProperties"})}catch(__react_docgen_typescript_loader_error){}const Index=({schema,rootSchema,indexOfFittingSchema,visible,path,renderers,cells,uischema,uischemas})=>{const[selectedAnyOf,setSelectedAnyOf]=(0,react.useState)(indexOfFittingSchema||0),handleChange=(0,react.useCallback)(((_ev,value)=>setSelectedAnyOf(value)),[setSelectedAnyOf]),_schema=(0,react.useMemo)((()=>((schema,rootSchema,keyword)=>Array.isArray(schema[keyword])&&-1!==schema[keyword].findIndex((e=>void 0!==e.$ref))?{...schema,[keyword]:schema[keyword].map((e=>e.$ref?(0,jsonforms_core_esm.q_E)(rootSchema,e.$ref,rootSchema):e))}:schema)(schema,rootSchema,"anyOf")),[schema,rootSchema]),anyOfRenderInfos=(0,react.useMemo)((()=>(0,jsonforms_core_esm.Cwb)(_schema.anyOf,rootSchema,"anyOf",uischema,path,uischemas)),[_schema,rootSchema,uischema,path,uischemas]);return react.createElement(Hidden.Z,{xsUp:!visible},react.createElement(MaterialCustomAnyOfRenderer_CombinatorProperties,{schema:_schema,combinatorKeyword:"anyOf",path}),react.createElement(Tabs.Z,{value:selectedAnyOf,onChange:handleChange},anyOfRenderInfos.map((anyOfRenderInfo=>react.createElement(Tab.Z,{key:anyOfRenderInfo.label,label:anyOfRenderInfo.label})))),anyOfRenderInfos.map(((anyOfRenderInfo,anyOfIndex)=>selectedAnyOf===anyOfIndex&&react.createElement(jsonforms_react_esm.et,{key:anyOfIndex,schema:anyOfRenderInfo.schema,uischema:anyOfRenderInfo.uischema,path,renderers,cells}))))},materialCustomAnyOfControlTester=(0,jsonforms_core_esm.yMz)(5,jsonforms_core_esm.aSN),MaterialCustomAnyOfRenderer=(0,jsonforms_react_esm.cR)(Index);try{Index.displayName="Index",Index.__docgenInfo={description:"",displayName:"Index",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/renderer/MaterialCustomAnyOfRenderer/index.tsx#Index"]={docgenInfo:Index.__docgenInfo,name:"Index",path:"src/components/renderer/MaterialCustomAnyOfRenderer/index.tsx#Index"})}catch(__react_docgen_typescript_loader_error){}const renderer_TypeOfRenderer=(0,jsonforms_react_esm.ZJ)((props=>{const{id,errors,schema,uischema,required,config,data,handleChange,path}=props,isValid=0===errors.length,appliedUiSchemaOptions=merge_default()({},config,uischema.options),[editMode,setEditMode]=(0,react.useState)(!1),handleChange_=(0,react.useCallback)((v=>{handleChange(path,v)}),[path,handleChange]);return(0,react.useEffect)((()=>{if(!data&&schema.const){const newURI=schema.const;handleChange_(newURI)}}),[schema,data,handleChange_]),react.createElement(Hidden.Z,{xsUp:!0},react.createElement(FormControl.Z,{fullWidth:!appliedUiSchemaOptions.trim,id,variant:"standard",sx:theme=>({marginBottom:theme.spacing(2)})},react.createElement(Grid.ZP,{container:!0,alignItems:"baseline"},react.createElement(Grid.ZP,{item:!0},react.createElement(IconButton.Z,{onClick:()=>setEditMode((prev=>!prev))},editMode?react.createElement(EditOff.Z,null):react.createElement(Edit.Z,null))),editMode&&react.createElement(Grid.ZP,{item:!0},react.createElement(FormLabel.Z,{error:!isValid,required:(0,jsonforms_core_esm.Dg7)(!!required,appliedUiSchemaOptions.hideRequiredAsterisk)},data||"")))))})),renderers=[...jsonforms_react_material_esm.yf,{tester:materialCustomAnyOfControlTester,renderer:MaterialCustomAnyOfRenderer},{tester:(0,jsonforms_core_esm.yMz)(10,(0,jsonforms_core_esm.SbN)("@id")),renderer:renderer_AutoIdentifierRenderer},{tester:(0,jsonforms_core_esm.yMz)(10,(0,jsonforms_core_esm.ReC)("@type")),renderer:renderer_TypeOfRenderer},{tester:(0,jsonforms_core_esm.yMz)(5,jsonforms_core_esm.rqD),renderer:renderer_MaterialArrayOfLinkedItemRenderer},{tester:(0,jsonforms_core_esm.yMz)(13,(uischema=>{if((0,lodash.isEmpty)(uischema))return!1;const options=uischema.options;return!(0,lodash.isEmpty)(options)&&options.inline})),renderer:renderer_InlineSemanticFormsRenderer},{tester:(0,jsonforms_core_esm.yMz)(14,((uischema,schema,ctx)=>{if((0,lodash.isEmpty)(uischema)||(0,jsonforms_core_esm.Ohw)(uischema,schema,ctx))return!1;const options=uischema.options;return!(0,lodash.isEmpty)(options)&&options.inline})),renderer:renderer_InlineCondensedSemanticFormsRenderer}],CRUDJsonForms=({entityIRI,data,setData,shouldLoadInitially,typeIRI,schema,queryBuildOptions,jsonFormsProps={},onInit,hideToolbar,readonly,parserMiddleware})=>{const[initiallyLoaded,setInitiallyLoaded]=(0,react.useState)(void 0),[editMode,setEditMode]=(0,react.useState)(!Boolean(readonly)),transformedData=(0,react.useMemo)((()=>parserMiddleware?parserMiddleware(data,schema):data),[data,schema,parserMiddleware]),jFConfig=(0,react.useMemo)((()=>jsonFormsProps.config),[jsonFormsProps.config]),{exists,load,save,remove,setIsUpdate,ready}=((entityIRI,typeIRI,schema,{useConcreteCRUD,...options})=>useConcreteCRUD(entityIRI,typeIRI,schema,options))(entityIRI,typeIRI,schema,{useConcreteCRUD:jFConfig.useCRUDHook,defaultPrefix:jFConfig.defaultPrefix,setData,data:transformedData,queryBuildOptions});(0,react.useEffect)((()=>{if(!ready)return;setTimeout((()=>(async()=>{entityIRI&&shouldLoadInitially&&initiallyLoaded!==entityIRI&&(setIsUpdate(await exists()),await load(),setInitiallyLoaded(entityIRI))})()),1)}),[entityIRI,shouldLoadInitially,ready,setIsUpdate,exists,load,initiallyLoaded,setInitiallyLoaded]);const handleFormChange=(0,react.useCallback)((state=>{setData(state.data)}),[setData]);(0,react.useEffect)((()=>{onInit&&onInit({load,save,remove})}),[onInit,load,save,remove]);const handleSave=(0,react.useCallback)((async()=>{await save(),await load(),setEditMode(!1)}),[save,setEditMode]);return react.createElement(react.Fragment,null,react.createElement(Hidden.Z,{xsUp:hideToolbar},react.createElement(IconButton.Z,{onClick:()=>setEditMode((editMode=>!editMode))},editMode?react.createElement(EditOff.Z,null):react.createElement(Edit.Z,null)),editMode&&react.createElement(react.Fragment,null,react.createElement(Button.Z,{onClick:handleSave},"speichern"),react.createElement(Button.Z,{onClick:remove},"entfernen"),react.createElement(Button.Z,{onClick:load},"laden"))),react.createElement(Grid.ZP,{container:!0,spacing:2},react.createElement(Grid.ZP,{item:!0,flexGrow:1},react.createElement(jsonforms_react_esm.C,(0,esm_extends.Z)({readonly:!editMode,data:transformedData,renderers:[...renderers,...jsonFormsProps.renderers||[]],cells:jsonforms_react_material_esm.TW,onChange:handleFormChange,schema},jsonFormsProps)))))};try{CRUDJsonForms.displayName="CRUDJsonForms",CRUDJsonForms.__docgenInfo={description:"",displayName:"CRUDJsonForms",props:{entityIRI:{defaultValue:null,description:"",name:"entityIRI",required:!1,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},setData:{defaultValue:null,description:"",name:"setData",required:!0,type:{name:"(data: any) => void"}},shouldLoadInitially:{defaultValue:null,description:"",name:"shouldLoadInitially",required:!1,type:{name:"boolean"}},typeIRI:{defaultValue:null,description:"",name:"typeIRI",required:!1,type:{name:"string"}},schema:{defaultValue:null,description:"",name:"schema",required:!0,type:{name:"JSONSchema7"}},debugEnabled:{defaultValue:null,description:"",name:"debugEnabled",required:!1,type:{name:"boolean"}},queryBuildOptions:{defaultValue:null,description:"",name:"queryBuildOptions",required:!1,type:{name:"SparqlBuildOptions"}},jsonFormsProps:{defaultValue:{value:"{}"},description:"",name:"jsonFormsProps",required:!1,type:{name:"Partial<JsonFormsInitStateProps>"}},onInit:{defaultValue:null,description:"",name:"onInit",required:!1,type:{name:"((crudOps: CRUDOpsType) => void)"}},hideToolbar:{defaultValue:null,description:"",name:"hideToolbar",required:!1,type:{name:"boolean"}},readonly:{defaultValue:null,description:"",name:"readonly",required:!1,type:{name:"boolean"}},parserMiddleware:{defaultValue:null,description:"",name:"parserMiddleware",required:!1,type:{name:"ParserMiddleware"}},onEntityChange:{defaultValue:null,description:"",name:"onEntityChange",required:!1,type:{name:"((entityIRI: string) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/CRUDJsonForms.tsx#CRUDJsonForms"]={docgenInfo:CRUDJsonForms.__docgenInfo,name:"CRUDJsonForms",path:"src/components/CRUDJsonForms.tsx#CRUDJsonForms"})}catch(__react_docgen_typescript_loader_error){}var namespace=__webpack_require__("./node_modules/@rdfjs/namespace/index.js");const sladb=(0,namespace.Z)("http://ontologies.slub-dresden.de/exhibition#"),slent=(0,namespace.Z)("http://ontologies.slub-dresden.de/exhibition/entity#"),genSlubJSONLDSemanticProperties=((baseIRI,entityBaseIRI)=>modelName=>({"@type":{const:`${baseIRI}${modelName.replace(/Stub$/,"")}`,type:"string"},"@id":{title:entityBaseIRI,type:"string"}}))(sladb[""].value,slent[""].value),exhibitionClassIRI=sladb.Exhibition.value,exampleData={"@id":slent["b7748b40-b15b-4a6d-8f13-e65088232080"].value,"@type":exhibitionClassIRI,title:"Otto Dix Ausstellung",subtitle:"Das neue Metrum",description:"Eine kontemporaere Ausstellung",startDate:{date:"2016-09-22",modifier:"AFTER"},endDate:{date:"2016-09-27",modifier:"AFTER"}},Exhibition_schema={$schema:"http://json-schema.org/draft-07/schema#",definitions:{DataImport:{type:"object",properties:{importTime:{type:"string",format:"date-time"},remarks:{type:"string"},status:{type:"string",maxLength:1,enum:["0","1","2"]}}},Tag:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},parent:{$ref:"#/definitions/Tag"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},Authority:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"}}},SeriesType:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"}}},ExhibitionSeries:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},parent:{$ref:"#/definitions/ExhibitionSeries"},seriesType:{$ref:"#/definitions/SeriesType"},fromDate:{type:"integer"},fromType:{type:"integer"},toDate:{type:"integer"},toType:{type:"integer"},openingDate:{type:"string",format:"date"},timeSeries:{type:"string",maxLength:200},location:{$ref:"#/definitions/Location"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"},tags:{type:"array",items:{$ref:"#/definitions/Tag"}}}},Person:{type:"object",properties:{name:{type:"string",maxLength:200},nameVariants:{type:"string",maxLength:2e3},gender:{type:"string",maxLength:1,enum:["m","f","d","u"]},description:{type:"string"},birthDate:{type:"integer"},deathDate:{type:"integer"},profession:{type:"string",maxLength:200},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"},externalId:{type:"string",maxLength:50},memberOfCorp:{type:"array",items:{$ref:"#/definitions/Corporation"}}}},Workplace:{type:"object",properties:{person:{$ref:"#/definitions/Person"},location:{$ref:"#/definitions/Location"},fromDate:{type:"integer"},toDate:{type:"integer"}}},Location:{type:"object",properties:{title:{type:"string",maxLength:200},titleVariants:{type:"string",maxLength:600},description:{type:"string"},parent:{$ref:"#/definitions/Location"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},Role:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},roleType:{type:"integer"}}},Place:{type:"object",properties:{title:{type:"string",maxLength:200},titleVariants:{type:"string",maxLength:600},description:{type:"string"},location:{$ref:"#/definitions/Location"},parent:{$ref:"#/definitions/Place"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},EventType:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},tags:{type:"array",items:{$ref:"#/definitions/Tag"}}}},Corporation:{type:"object",properties:{name:{type:"string",maxLength:200},nameVariants:{type:"string",maxLength:600},description:{type:"string"},parent:{$ref:"#/definitions/Corporation"},location:{$ref:"#/definitions/Location"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},ResourceType:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50}}},Resource:{type:"object",properties:{ressourceType:{$ref:"#/definitions/ResourceType"},title:{type:"string",maxLength:200},description:{type:"string"},ppn:{type:"string",format:"uri"},doi:{type:"string",format:"uri"},url:{type:"string",format:"uri"},signature:{type:"string",maxLength:200}}},ExponatsAndPersons:{type:"object",properties:{exponat:{$ref:"#/definitions/ExhibitionExponat"},person:{$ref:"#/definitions/Person"},role:{$ref:"#/definitions/Role"}}},ExponatsAndCorporations:{type:"object",properties:{exponat:{$ref:"#/definitions/ExhibitionExponat"},corporation:{$ref:"#/definitions/Corporation"},role:{$ref:"#/definitions/Role"}}},ExhibitionExponat:{type:"object",properties:{title:{type:"string",maxLength:500},titleVariants:{type:"string",maxLength:600},description:{type:"string"},externalId:{type:"string",maxLength:200},fromDate:{type:"integer"},fromType:{type:"integer"},fromDateDisplay:{type:"string",maxLength:200},toDate:{type:"integer"},toType:{type:"integer"},toDateDisplay:{type:"string",maxLength:200},url:{type:"string",format:"uri"},signature:{type:"string",maxLength:200},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"},exponatGenres:{type:"array",items:{$ref:"#/definitions/Genre"}},involvedPersons:{type:"array",items:{$ref:"#/definitions/ExponatsAndPersons"}},involvedCorporations:{type:"array",items:{$ref:"#/definitions/ExponatsAndCorporations"}},resources:{type:"array",items:{$ref:"#/definitions/Resource"}}}},ExhibitionCategory:{type:"object",properties:{name:{type:"string",maxLength:200},description:{type:"string"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},OtherDate:{type:"object",properties:{exhibition:{$ref:"#/definitions/Exhibition"},dateValue:{type:"string",maxLength:8},dateType:{type:"integer"}}},InvolvedPerson:{type:"object",properties:{exhibition:{$ref:"#/definitions/Exhibition"},person:{$ref:"#/definitions/Person"},role:{$ref:"#/definitions/Role"}}},InvolvedCorporation:{type:"object",properties:{exhibition:{$ref:"#/definitions/Exhibition"},corporation:{$ref:"#/definitions/Corporation"},role:{$ref:"#/definitions/Role"}}},ExhibitionWebLink:{type:"object",properties:{exhibition:{$ref:"#/definitions/Exhibition"},weblink:{type:"string",format:"uri"}}},Genre:{type:"object",properties:{title:{type:"string",maxLength:200},description:{type:"string"},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"}}},Exhibition:{type:"object",properties:{externalId:{type:"string",maxLength:50},exhibitionType:{$ref:"#/definitions/EventType"},title:{type:"string",maxLength:200},subtitle:{type:"string",maxLength:200},originalTitle:{type:"string",maxLength:200},description:{type:"string"},exhibitionSeries:{$ref:"#/definitions/ExhibitionSeries"},exhibitionCategory:{$ref:"#/definitions/ExhibitionCategory"},exhibitionGenre:{$ref:"#/definitions/Genre"},sourceCorporation:{$ref:"#/definitions/Corporation"},fromDate:{type:"integer"},fromType:{type:"integer"},fromDateDisplay:{type:"string",maxLength:200},toDate:{type:"integer"},toType:{type:"integer"},toDateDisplay:{type:"string",maxLength:200},published:{type:"boolean"},editorNote:{type:"string",maxLength:300},authority:{$ref:"#/definitions/Authority"},idAuthority:{type:"string",maxLength:50},lastNormUpdate:{type:"string",format:"date-time"},involvedCorporations:{type:"array",items:{$ref:"#/definitions/InvolvedCorporation"}},places:{type:"array",items:{$ref:"#/definitions/Place"}},locations:{type:"array",items:{$ref:"#/definitions/Location"}},tags:{type:"array",items:{$ref:"#/definitions/Tag"}},involvedPersons:{type:"array",items:{$ref:"#/definitions/InvolvedPerson"}},exponats:{type:"array",items:{$ref:"#/definitions/ExhibitionExponat"}},resources:{type:"array",items:{$ref:"#/definitions/Resource"}}}}}};var esm=__webpack_require__("./node_modules/zustand/esm/index.mjs");const baseIRI=sladb[""].value,makeIRIsFromIDs=(data,idFieldKeys=["id","uuid"])=>{if(!data)return data;if(Array.isArray(data))return data.map((d=>makeIRIsFromIDs(d,idFieldKeys)));if("object"==typeof data){const keys=Object.keys(data),idFieldKey=keys.find((k=>idFieldKeys.includes(k))),newData=Object.fromEntries(keys.map((k=>[k,makeIRIsFromIDs(data[k],idFieldKeys)])));return idFieldKey?{...newData,"@id":slent(data[idFieldKey]).value}:newData}return data},useDataState=(0,esm.Ue)((set=>({data:{},setData:(typeName,id,data)=>{set((state=>({data:{...state.data,[typeName]:{...state.data[typeName]||{},[id]:data}}})))},removeData:(typeName,id)=>{set((state=>{const{[id]:_,...rest}=state.data[typeName];return{data:{...state.data,[typeName]:rest}}}))}})));var queryClient=__webpack_require__("./node_modules/@tanstack/query-core/build/lib/queryClient.mjs"),QueryClientProvider=__webpack_require__("./node_modules/@tanstack/react-query/build/lib/QueryClientProvider.mjs");const CRUDJsonForms_story_baseIRI=sladb[""].value,uischemata=uischemas(Exhibition_schema,CRUDJsonForms_story_baseIRI),config={baseIRI:CRUDJsonForms_story_baseIRI,entityBaseIRI:slent[""].value,defaultPrefix:CRUDJsonForms_story_baseIRI,useCRUDHook:(entityIRI,typeIRI,_schema,{askFetch,constructFetch,updateFetch,data,setData})=>{const[isUpdate,setIsUpdate]=(0,react.useState)(!1),typeName=(0,react.useMemo)((()=>typeIRI?typeIRI.substring(baseIRI.length,typeIRI.length):""),[typeIRI]),id=(0,react.useMemo)((()=>"string"==typeof entityIRI?entityIRI.substring(entityIRI.lastIndexOf("#")+1,entityIRI.length):void 0),[entityIRI]),{data:storeData,setData:setDataStore,removeData}=useDataState((state=>state)),exists=(0,react.useCallback)((async()=>{if(!id)return!1;const resp=data[typeName]?.[id];return resp?.id===id}),[id,storeData,typeName]),load=(0,react.useCallback)((async()=>{if(!id)return;const resp=storeData[typeName]?.[id];if(!resp)return;const _data=makeIRIsFromIDs(Object.fromEntries(Object.entries(resp).filter((([,v])=>null!=v))));setData({..._data,...{"@type":typeIRI,"@context":{"@vocab":baseIRI}}})}),[id,typeName,storeData,setData,typeIRI]),remove=(0,react.useCallback)((async()=>{id&&removeData(id,typeName)}),[id,typeName,removeData]);return{exists,load,save:(0,react.useCallback)((async()=>{data&&id&&setDataStore(typeName,id,data)}),[id,data,isUpdate,setDataStore,typeName]),remove,isUpdate,setIsUpdate,ready:Boolean(askFetch&&constructFetch&&updateFetch)}},genJSONLDSemanticProperties:genSlubJSONLDSemanticProperties},CRUDJsonForms_story_queryClient=new queryClient.S,CRUDJsonForms_story={title:"CRUDJsonForms",component:CRUDJsonForms,decorators:[Story=>react.createElement(QueryClientProvider.aH,{client:CRUDJsonForms_story_queryClient},react.createElement(Story,null))]},schema=((schema,key)=>{const definitionsKey="$defs"in schema?"$defs":"definitions";return{...schema,...schema[definitionsKey][key]||{}}})(((schema,genJSONLDSemanticProperties)=>{const definitionsKey="$defs"in schema?"$defs":"definitions",withJSONLDProperties=(name,schema)=>({...schema,properties:{...schema.properties,...genJSONLDSemanticProperties?genJSONLDSemanticProperties(name):{}}}),stubDefinitions=(definitions=defs(schema),Object.entries(definitions||{}).reduce(((acc,[key,value])=>{const stubKey=`${key}Stub`,stub={...(0,lodash.isObject)(value)?value:{},properties:(0,lodash.isObject)(value)?(properties=value.properties,Object.fromEntries(Object.entries(properties||{}).filter((([,value])=>"object"==typeof value&&("string"===value.type||"number"===value.type||"boolean"===value.type))))):void 0};var properties;return{...acc,[stubKey]:stub}}),{}));var definitions;const schemaWithRefStub=recursivelyFindRefsAndAppendStub(schema),stubbedSchema={...schemaWithRefStub,[definitionsKey]:{...stubDefinitions,...schemaWithRefStub[definitionsKey]}},definitionsWithJSONLDProperties=Object.entries(defs(stubbedSchema)).reduce(((acc,[key,value])=>({...acc,[key]:withJSONLDProperties(key,value)})),{});return{...stubbedSchema,[definitionsKey]:definitionsWithJSONLDProperties}})(Exhibition_schema,genSlubJSONLDSemanticProperties),"Exhibition"),Default=()=>{const[formData,setFormData]=(0,react.useState)(exampleData);return react.createElement(Box.Z,null,react.createElement(CRUDJsonForms,{data:formData,entityIRI:formData["@id"],setData:_data=>setFormData(_data),shouldLoadInitially:!0,typeIRI:exhibitionClassIRI,schema,jsonFormsProps:{uischemas:uischemata,config}}))};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  const [formData, setFormData] = useState(exampleData);\n  return <Box>\n      <CRUDJsonForms data={formData} entityIRI={formData['@id']} setData={_data => setFormData(_data)} shouldLoadInitially typeIRI={exhibitionClassIRI} schema={(schema as JSONSchema7)} jsonFormsProps={{\n      uischemas: uischemata,\n      config\n    }} />\n    </Box>;\n}",...Default.parameters?.docs?.source}}}}}]);